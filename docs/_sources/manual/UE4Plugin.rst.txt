.. |reg| unicode:: U+000AE .. REGISTERED SIGN
   :ltrim:
   
.. |squared| unicode:: U+000B2 .. REGISTERED SIGN
   :ltrim:

.. |br| raw:: html

   <br/>

.. _UE4Plugin:

=======================
Unreal Engine 4 Plugin
=======================

To bring the advantages of RTXGI to as many developers as possible, all RTXGI 1.1 features are now available in Unreal Engine 4 through the RTXGI UE4 plugin.

To use the RTXGI UE4 plugin, you'll first need to meet the following software and hardware requirements:

.. raw:: html

   <b>Software:</b> <br>

* Windows 10 v1809 or higher.
* Visual Studio 2017 or 2019.
* Windows SDK version 10.0.17763 or higher (can be installed using the Visual Studio Installer).
* The latest drivers for your GPU. NVIDIA drivers `are available here <http://www.nvidia.com/drivers>`_.
* Unreal Engine version 4.26.1 (preferred), 4.26.0, 4.25.4, or 4.25.3 source code, available for free from `Epic Games <https://www.unrealengine.com/en-US/ue4-on-github>`_ or from the `NVIDIA RTX branch <https://github.com/NvRTX/UnrealEngine/tree/rtx-dlss-4.26>`_ of Unreal Engine. 

.. note:: **RTXGI v1.1.30 (and later) is not available in UE4.25**. Use RTXGI v1.1.23 with UE4.25.

.. raw:: html

   <b>Hardware:</b> <br>

* Any DXR enabled GPU. NVIDIA DXR enabled GPUs:

    * RTX 3090, 3080, 3070, 3060 Ti, 3060
    * RTX 2080 Ti, 2080 SUPER, 2080, 2070 SUPER, 2070, 2060 SUPER, 2060
    * GTX 1660 Ti, 1660 SUPER, 1660
    * GTX 1080 Ti, 1080, 1070, 1060 with at least 6GB of memory

.. note:: **Problems, Feedback, and Bugs** |br| If you encounter any problems, have feedback, or would like to report a bug, please contact: `rtxgi-support-service@nvidia.com <mailto:rtxgi-support-service@nvidia.com>`_ 


-----------------------------
Getting Started in NvRTX
-----------------------------

.. |plugins-dialog| image:: ../images/ue4-plugin/plugins.png
.. |ddgi-volume| image:: ../images/ue4-plugin/editor-ddgi-volume.png

The fastest and easiest way to get started with RTXGI in UE4 is to download the latest version of the `NVIDIA RTX branch of UE4 <https://developer.nvidia.com/unrealengine>`_ (also known as NvRTX).

**The latest RTXGI plugin comes pre-installed in NvRTX 4.26.1 (goodbye patches!)**.

.. note:: **Access to NvRTX is available to everyone!** To use NvRTX, you'll need a GitHub account and an Epic Games account that are linked. Instructions to do this are available at `https://www.unrealengine.com/en-US/ue4-on-github <https://www.unrealengine.com/en-US/ue4-on-github>`_. Once that process is complete, you will be able to access the NvRTX GitHub repository at `https://github.com/NvRTX/UnrealEngine <https://github.com/NvRTX/UnrealEngine>`_.

After downloading, compiling, and running NvRTX UE4 **set your project's default RHI to DirectX 12 and enable Ray Tracing** in the project settings. At this time, ray tracing requires DirectX 12 in Unreal Engine 4.

- Go to *Project Settings->Platforms->Windows->Targeted RHIs->Default RHI* and select DirectX 12.

  - Make sure the DirectX 11 & 12 (SM5) check box is also selected.

- Go to *Project Settings->Engine->Rendering->Ray Tracing* and check the box next to Ray Tracing.

- (Optional) Enable *Force No Precomputed Lighting* to avoid doubling lighting contributions (i.e. mixing RTXGI and precomputed indirect lighting).

  - To disable precomputed lighting in the current level, select *World Settings->Lightmass->Force No Precomputed Lighting*.

  - To disable precomputed lighting globally, disable *Project Settings->Engine->Rendering->Lighting->Allow Static Lighting*.

Next, navigate to the plugins area and **enable the RTX Global Illumination (RTXGI) plugin**.

- In the editor, go to *Settings->Plugins*.
- In the plugins dialog, go to *Built-In->Rendering*.
- *Enable* the NVIDIA RTX Global Illumination plugin.

  |plugins-dialog|

- Restart the UE4 editor.
- Set the ``r.GlobalIllumination.ExperimentalPlugin`` cvar to ``1`` to enable global illumination plugins (set in ``.ini`` files, on the console, or in blueprints).
- Set the ``r.RTXGI.DDGI`` cvar to ``1`` to enable RTXGI (set in ``.ini`` files, on the console, or in blueprints).
- Place DDGIVolume actors in the scene and to use RTX Global Illumination within the volume.
- That's it.  Go make something great with RTXGI! Learn more about RTXGI `Functionality`_ and usage in the `Artist Overview`_.

  |ddgi-volume|

--------------------------------
Getting Started in Vanilla UE4
--------------------------------

If you prefer to use mainline (also known as "vanilla") UE4, the setup process requires a few more steps compared to NvRTX. You will need to apply a patch file to the engine source code to install the RTXGI plugin. Patch files are required since engine-side changes are necessary for the RTXGI plugin to work with Unreal Engine. **If you are not familiar with this process, we strongly recommend using NvRTX instead**.

.. note:: If you are using NvRTX, skip this section.

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Clone Unreal Engine 4
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. |repo-line-endings| image:: ../images/ue4-plugin/repo-config-line-endings.png


- Clone Unreal Engine 4.26.1 from the Epic Games `Unreal Engine GitHub <https://www.unrealengine.com/en-US/ue4-on-github>`_.

  - **Make sure Git is configured to checkout the Unreal Engine source code with "Windows-style" line endings.**

  - This is **very important** since patch application will fail if the engine code and the plugin patch file line ending types do not match.

  - Below is an example of how this is done in the `GitExtensions <http://gitextensions.github.io/>`_ tool. 

  |repo-line-endings|

.. note:: **RTXGI v1.1.30 (and later) is not available in UE4.25**. Use RTXGI v1.1.23 with UE4.25.

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Clone the RTXGI Plugin Patch
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. |ue4-root-patch| image:: ../images/ue4-plugin/ue4-root-patch.png

- Clone or download the **RTXGI-4.26.1.patch** file from the **ue4-plugin** directory of the RTXGI GitHub repository.

  - Alternatively, select the patch that matches the engine version you are using.

- **Make sure the patch file also has windows style line endings.**

- Copy the patch file to the root directory of the cloned Unreal Engine source code.

  |ue4-root-patch|

.. note:: Patch files are available in the RTXGI SDK Github repository under the **ue4-plugin** directory.

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Apply the Pugin Patch
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

- Open a Git bash command prompt in the root directory of the cloned Unreal Engine source code.

- Type ``git apply --check RTXGI-UE4.xx.y.patch`` and hit enter.

  - Replace ``xx`` with the major engine version number (e.g. ``26``), and ``y`` with the minor engine version number (e.g. ``1``).

  - This checks if the chosen patch can be applied to the repository.

  - If ``git apply --check ...`` returns errors, follow the prompt and resolve conflicts manually.

  - If ``git apply --check ...`` returns nothing (or only warnings) continue to the next step.

- In the same command prompt, type ``git apply RTXGI-UE4.xx.y.patch`` and hit enter.

  - Again, replace ``xx`` with the major engine version number and ``y`` with the minor engine version number.

- The patch is now applied and the RTXGI plugin is installed. The engine must be (re)built.

    - Run ``GenerateProjectFiles.bat`` to regenerate the project files.

    - Open ``UE4.sln`` and build the engine.

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Enable DirectX 12, Ray Tracing, and the RTXGI Plugin
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

- Go to *Project Settings->Platforms->Windows->Targeted RHIs->Default RHI* and select DirectX 12.

  - Make sure the DirectX 11 & 12 (SM5) check box is also selected.

- Go to *Project Settings->Engine->Rendering->Ray Tracing* and check the box next to Ray Tracing.

- (Optional) Enable *Force No Precomputed Lighting* to avoid doubling lighting contributions (i.e. mixing RTXGI and precomputed indirect lighting).

  - To disable precomputed lighting in the current level, select *World Settings->Lightmass->Force No Precomputed Lighting*.

  - To disable precomputed lighting globally, disable *Project Settings->Engine->Rendering->Lighting->Allow Static Lighting*.

Next, navigate to the plugins area and **enable the RTX Global Illumination (RTXGI) plugin**.

- In the editor, go to *Settings->Plugins*.
- In the plugins dialog, go to *Built-In->Rendering*.
- *Enable* the NVIDIA RTX Global Illumination plugin.

  |plugins-dialog|

- Restart the UE4 editor.
- Set the ``r.GlobalIllumination.ExperimentalPlugin`` cvar to ``1`` to enable global illumination plugins (set in ``.ini`` files, on the console, or in blueprints).
- Set the ``r.RTXGI.DDGI`` cvar to ``1`` to enable RTXGI (set in ``.ini`` files, on the console, or in blueprints).
- Place DDGIVolume actors in the scene and to use RTX Global Illumination within the volume.
- That's it.  Go make something great with RTXGI! Learn more about RTXGI `Functionality`_ and usage in the `Artist Overview`_.

  |ddgi-volume|


-------------------------------
Functionality
-------------------------------

.. _Functionality:

RTXGI implements the *Dynamic Diffuse Global Illumination (DDGI)* algorithm to compute diffuse global illumination. DDGI uses ray tracing to gather irradiance and distance data on a regular grid of probes. This is similar to existing irradiance probe solutions you may already be familiar with, but irradiance and distance calculations now occur in real time. RTXGI probes temporally accumulate data and use a statistics-based method to resolve visibility and prevent light leaking.

**To use RTXGI in UE4, place DDGIVolume actors in the scene**. These volumes contain a grid of probes that RTXGI updates with ray tracing. One ``DDGIVolume`` is updated per frame in a weighted round robin fashion using the volume's **Update Priority** property.

Various properties of a ``DDGIVolume`` can be adjusted and these properties are discussed in the `Artist Overview`_.

.. note:: Probes temporally accumulate bounce lighting after a ``DDGIVolume`` is placed in the world.

Several new console variables ("cvars") are available to with RTXGI. These are described in the table below.

.. list-table:: RTXGI Console Variables
  :widths: 15 10 70
  :header-rows: 1

  * - Command
    - Options
    - Description
  * - ``r.RTXGI.DDGI``
    - 0, 1
    - Toggles RTXGI on or off.
  * - ``r.RTXGI.DDGIShowProbes``
    - 0, 1
    - Toggles a visualization of RTXGI volumes and probes on or off.
  * - ``r.RTXGI.DDGIProbeVis``
    - 0, 1, 2
    - Toggles probe visualization. This allows the user to see what the probes see from the camera's point of view. In mode 2, it shows ray misses in blue, ray hits in green and ray back face hits in red.
  * - ``r.RTXGI.MemoryUsed``
    - None
    - Shows the summary and details of video memory being used by RTXGI in the output log.
  * - ``Vis DDGIProbeVis``
    - None
    - Allows the user to see the texture from the ``r.RTXGI.DDGIProbeVis`` command. This helps diagnose inaccuracies in the probes due to lighting or geometry not being configured to be visible to ray tracing.


**Project Settings:** |br|
The RTXGI plugin has several settings in UE4's project settings dialog.

   - **Irradiance Bits** - by default, a 10-bit per color channel texture format is used to store probe irradiance. With extended radiance or very bright light sources, 10-bits may not be enough to properly represent the light's energy. The Irradiance texture's bit depth can be increased to 32-bits (using a RGBA32F texture format) to support extended radiance at the cost of increased memory use. Alteratively, use 10-bit irradiance and adjust the **Irradiance Scalar** option of a ``DDGIVolume`` to reduce lighting magnitudes before storage and scale them back up after reading. This saves memory at the cost of some precision.

   - **Distance Bits** - by default, 16-bit floating point format is used to store distance (and distance squared) in a probe for use when determiniming occlusion. When distances are large, 16-bits may not be sufficient. The distance texture's bit depth can be increased to 32-bits for improved precision.

   - **Debug Probe Radius** - sets the radius of spheres, in world-space units, that are rendered when visualizing ``DDGIVolume`` probes.

   - **Probe Update Ray Budget** - sets the maximum number of rays that may be cast when updating probes. 0 specifies an unlimited number of rays. An 8x8x8 volume using 288 rays per probe would specify 147,456 to fully update all probes each frame. One volume is updated each frame based on the volume's priority. A higher volume priority means the volume is updated more often. These settings make it possibe to place a ceiling on performance costs, while also controlling the proportion of ray updates (or amount of light lag) a volume recieves.


**Limitations:**

   - RTXGI lighting does not work with UE4's forward rendering path.
   - RTXGI lighting does not work with UE4's other ray traced effects (for example, ray traced reflections).


-------------------------------
Artist Overview
-------------------------------

.. _Artist Overview:

RTXGI adds a high performance option to ray traced global illumination in UE4. As implied by the name, RTXGI requires ray tracing to be enabled and the plugin to be active.

If ray tracing is not available, the RTXGI plugin loads probe textures that were previously stored to disk from a platform that has ray tracing (i.e. DirectX 12).

.. note:: When ray tracing is not available, for example in DirectX 11 or Vulkan RHIs, ``DDGIVolumes`` can be used but operate in a static mode where the probes do not update at runtime.

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
RTXGI Volume Placement in UE4
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. |volume-actor| image:: ../images/ue4-plugin/volume-actor.png
.. |transform-gizmos| image:: ../images/ue4-plugin/transform-gizmos.png

You can find the ``DDGIVolume`` actor under **All Classes** (shown below) and place it in a level.

|volume-actor|

All of UE4's native transform gizmos (translation, rotation, and scale) can be used to fit the volume to your geometry.

|transform-gizmos|

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Using RTXGI in UE4
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Dynamic indirect lighting is generated inside the ``DDGIVolume`` with RTXGI. The ``DDGIVolume`` has many properties that can be tweaked (shown below), but the default values should work well for many situations.

.. |volume-settings| image:: ../images/ue4-plugin/settings.png
.. |volume-settings-advanced| image:: ../images/ue4-plugin/settings-advanced.png

|volume-settings|

.. list-table:: Basic ``DDGIVolume`` Properties
  :widths: 12 70
  :header-rows: 1

  * - Property
    - Description
  * - Rays Per Probe
    - Sets the number of rays traced per probe. Higher numbers of rays traced per probe increases image quality by producing more stable indirect illumination, but will have a higher performance cost. **In many cases, the default of 288 rays per probe works well**.
  * - Probe Counts
    - Sets the number of probes placed on each axis of a ``DDGIVolume``. High probe counts within a volume are usually not necessary. **We recommend probe grids arranged with probes every 2-3 meters**. Sparse probe grids often produce better visual results than dense probe grids, since dense probes grids localize the effect of each probe and can (at times) reveal the structure of the probe grid.  **When in doubt, use the minimum number of probes necessary to get the desired result**.
  * - Lighting Priority
    - A value that allows for custom prioritization of volumes. If there are multiple volumes in the view frustum at the same time, the densest volume will be selected and used to apply indirect lighting to nearby surfaces. **If you want to override this behavior, give the volume you want to use the lowest lighting priority value (and increase the lighting priority value of other volumes)**.
  * - Update Priority
    - A weighted round robin system is used to update volumes. **Volumes with higher update priority values are updated more often**. As a result, as more volumes are added to the scene, it will take longer for the system to update all volumes.
  * - Probe Max Ray Distance
    - The maximum distance a probe ray can travel. No surfaces are hit past this distance. Reducing this value can increase performance in some scenarios.
  * - Probe Hysteresis
    - A value in the range [0,1] that affects the temporal accumulation of ray tracing results in probes. A value of 1 always uses the existing probe values and ignores the latest ray traced information. A value of 0 always uses the latest ray traced information and ignores all previous probe data. This property is best set to a value that balances the previous and latest ray traced data. **The default value of 0.97 works well in most cases**.
  * - View and Normal Bias
    - Similar to shadow map biases, these properties help adjust for visibility artifacts. If you are seeing light or shadow leaking problems, adjust these bias values. **In general, the view bias value should be 4x larger than the normal bias**.
  * - Volume Blend Distance
    - Specifies how the ``DDGIVolume`` blends at the edges of the volume, in world-space units. This is used to create faded areas at the edge of the volume and can be useful as an artistic control. For example, if you wanted vaulted ceilings at the top of a volume to have less light.
  * - Volume Blend Distance Black
    - The distance from the edge of a volume at which it has zero weight (i.e. turns black or yields to an encompassing volume), in world-space units. Useful if you do not want a linear fade all the way to the edge.
  * - Enable Probe Relocation
    - Adjusts the position of probes every frame based on the surrounding world geometry. Probes are moved to locations that result in better lighting, instead of (for example) being positioned inside of walls or other objects.
  * - Enable Probe Scrolling
    - Turns the volume into an **Infinite Scrolling Volume**. The volume becomes world axis-aligned and when the volume moves the probes on the outer-most edges of the volume are repositioned to the opposite end of the volume in the direction of movement ("scrolling" the volume like tank tread). With this approach, the majority of probes retain their position in world-space making for more temporally stable lighting results when the volume moves.
  * - Enable Volume
    - Manually enables or disables the volume.
  * - Runtime Static
    - **Volumes marked as runtime static will store indirect lighting in probes at author-time and will not be updated dynamically during gameplay**. This can be used to decrease performance costs. For example, place a large static volume in the level with very sparse probes and mark it as runtime static to fill the scene with indirect lighting computed while in-editor. Then use smaller, denser DDGIVolumes for dynamic indirect lighting in places of interest at runtime.
  * - Skylight
    - When selected, the sky light contributes to lighting computed by the ``DDGIVolume``. Note that the sky light does not use ray tracing to determine occlusion, so enabling this may inject lighting into areas that do not actually recieve it.


.. list-table::
  :header-rows: 1
  :align: center

  * - DDGIVolume Actor Advanced Properties
  * - |volume-settings-advanced|


.. list-table:: Advanced ``DDGIVolume`` Properties
  :widths: 20 70
  :header-rows: 1

  * - Property
    - Description
  * - Probe Distance Exponent
    - An exponent used during visibility testing. A high value rapidly reacts to depth discontinuities but may cause banding.
  * - Probe Irradiance Encoding Gamma
    - An exponent that perceptually encodes irradiance for faster light-to-dark convergence.
  * - Probe Change Threshold
    - A ratio used during probe radiance blending. Specifies a threshold to identify when large lighting changes occur. When the difference in the maximum color components between the previous and current irradiance is larger than this threshold, the hysteresis will be reduced.
  * - Probe Brightness Threshold
    - A threshold value used during probe radiance blending that determines the maximum allowed difference in brightness between the previous and current irradiance values. This prevents impulses from drastically changing a texel's irradiance in a single update cycle.
  * - Probe Min Frontface Distance
    - The minimum distance allowed to a front facing triangle before Probe Relocation moves the probe.
  * - Probe Backface Theshold
    - The ratio of rays cast for a probe that may hit back facing triangles before Probe Relocation and State Classification assume the probes is inside of geometry.
  * - Light Multiplier
    - Use this setting to artificially increase or decrease the GI lighting contribution from this volume.
  * - Emissive Multiplier
    - Use this setting to artificially increase or decrease how much emissive contributes to the GI in this volume.
  * - Irradiance Scalar
    - A [0,1] value that is used to scale lighting magnitudes before storage when using 10-bit irradiance texture formats. Scaled values are reconstituted after reading, allowing for larger irradiance values to be stored in 10-bit texture formats. This saves memory at the cost of some precision.

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Tips and Tricks
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

**************************************
Sparse Probe Layouts Recommended
**************************************
Relatively sparse probe grids are good practice for both high performance and quality results. As a starting point, we recommend setting probes about 2-3 meters apart from each other in a typical human-scale indoor scene. In large outdoor scenes, you can go much sparser and still get good results!

.. note:: By design, RTXGI does **not** generate high frequency detail. Increasing probe density can help to an extent, but it won't produce precise or sharp lighting and shadow at any density. For high frequency details, use other forms of lighting such as point lighting with shadows or screen-space global illumination (SSGI).

You can have multiple ``DDGIVolumes`` with varying probe densities. The system will always make use of the probes in the denser volume. You might do this if you need a more precision in a specific area. It may not take an expensive volume to achieve more precise sampling. The volume on the bottom right is a 5x5x5 ``DDGIVolume`` set to the default 288 rays per probe. A volume like this is relatively inexpensive and can help achieve the result you want!


.. |probe| image:: ../images/ue4-plugin/probes.png

.. |sub-volume| image:: ../images/ue4-plugin/probe-density.png

.. list-table::
   :widths: 49 49
   :header-rows: 1
   :align: center

   * - Recommended probe density
     - A higher density "detail" volume
   * - |probe|
     - |sub-volume|


*******************************************************
Emissive Surfaces are Light Sources with RTXGI
*******************************************************
In this example of the NVIDIA Attic scene, there are large emissive meshes outside the windows to generate extra indirect light.

.. figure:: ../images/ue4-plugin/emissive-surfaces.png
   :scale: 100%
   :align: center

   Emissive meshes added outside the NVIDIA Attic to add indirect lighting.


*Any emissive surface can be a light source with RTXGI*. The larger and more physically available the light emissive mesh is to RTXGI probes, the greater the lighting contribution. Emissive surface values can also be turned up to generate more light. With this approach, you might find it's better to switch from 10-bit irradiance to 32-bit irradiance, since this provides a more detailed range of light contributions. **32-bit irradiance should be used with caution** though, since it increases the memory cost 3x. Only enable 32-bit irradiance when absolutely necessary!

With RTXGI, it is now possible to light a scene with fewer point lights, spot lights, and/or area lights. Instead, you can rely on a combination of a few lights and emissive surfaces. This change will not only improve workflow and iteration time, but it can improve performance (due to fewer lights). You may find it's better to take on the small fixed cost of RTXGI instead of using many shadow casting lights. **Lighting a scene in this way is a different approach, but may produce a result that runs faster and is easier to create**.

**Here's a practical example:** |br|
Emissive meshes generate extra light without being a visible part of the scene. In UE4, the emissive meshes can be marked as *only visible to ray tracing*. You can create "hidden" emissive meshes to generate extra global illumination in areas where the visible mesh is too small to contribute on its own. To do this, make use of the ``RayTracingQualitySwitch`` node.

.. |emissive| image:: ../images/ue4-plugin/emissive-surfaces2.png

.. |emissive2| image:: ../images/ue4-plugin/green-lights.png

.. list-table::
   :widths: 49 49
   :header-rows: 1
   :align: center

   * - Indirect lighting from hidden emissive meshes
     - Hidden emissive meshes visualized
   * - |emissive|
     - |emissive2|

******************************************************
Make sure RTXGI is contributing light where you want
******************************************************
RTXGI doesnâ€™t automatically make every surface brighter. It can require some fine tuning and the final result is a combination of your materials, overall lighting, postprocess settings, and other choices. A handy way to start developing your baseline for the global illumination contribution is to look at your scene in ``Lightingonly`` mode. ``Lightingonly`` is useful in this case because it displays all surfaces with a flat 50% gray color. When turning RTXGI on and off, you'll get a clear understanding of the true global illumination contribution being made by various lighting sources.

.. note:: Even though the surfaces display as 50% gray, they still contribute color lighting and bounce, so you are getting a good look at what the lighting is doing.

.. |direct| image:: ../images/ue4-plugin/direct-only.png

.. |indirect| image:: ../images/ue4-plugin/direct+rtxgi.png

.. list-table::
   :widths: 49 49
   :header-rows: 1
   :align: center

   * - Lightingonly mode, with direct lighting only
     - Lightingonly mode, with direct lighting and RTXGI
   * - |direct|
     - |indirect|

As you can imagine, dark surfaces don't reflect light well (very dark surfaces don't reflect light at all!). If your textures are dark (typically below the 50% brightness threshold), they will have less bounce light and a smaller global illumination contribution. This is not necessarily a bad result. If objects are meant to be very dark then the lighting is as intended and still physically based. Brighter surfaces will contribute more obvious bounce light (since they reflect it). Think of the visual look of a game like Mirror's Edge - with it's very bright and colorful surfaces and how much indirect bounce lighting it shows off.

**The Ultimate Tip:** |br|
Think about your surfaces and how they relate to global lighting. If your goal is to make sure you have a lot of indirect light in your scene, even small value changes can have an impact on the final indirect lighting result. It may not take much of a shift in some cases to get the result you want.

.. figure:: ../images/ue4-plugin/direct+rtxgi+texture.png
   :scale: 100%
   :align: center

   Caption