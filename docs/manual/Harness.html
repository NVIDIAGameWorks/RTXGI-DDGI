

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Test Harness &mdash; RTXGI SDK 1.0  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/nvidia_theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="RTXGI SDK Overview" href="SDKOverview.html" />
    <link rel="prev" title="Quick Start" href="QuickStart.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> RTXGI SDK 1.0
          

          
            
            <img src="../_static/nvidia_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="Index.html">User’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="License.html">License</a></li>
<li class="toctree-l2"><a class="reference internal" href="Welcome.html">Welcome</a></li>
<li class="toctree-l2"><a class="reference internal" href="QuickStart.html">Quick Start</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Test Harness</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#main-features">Main Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#application-configuration">Application Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#light-configuration">Light Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#camera-configuration">Camera Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ray-tracing-configuration">Ray Tracing Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#volume-configuration">Volume Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#input-configuration">Input Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#post-process-configuration">Post Process Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#visualization-configuration">Visualization Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#scene-and-asset-loading">Scene and Asset Loading</a></li>
<li class="toctree-l3"><a class="reference internal" href="#shaders">Shaders</a></li>
<li class="toctree-l3"><a class="reference internal" href="#debugging-and-visualization">Debugging and Visualization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#probe-visualization">Probe Visualization</a></li>
<li class="toctree-l4"><a class="reference internal" href="#texture-visualization">Texture Visualization</a></li>
<li class="toctree-l4"><a class="reference internal" href="#camera-and-volume-movement">Camera and Volume Movement</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#input-controls">Input Controls</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#mouse-and-keyboard">Mouse and Keyboard</a></li>
<li class="toctree-l4"><a class="reference internal" href="#graphical-user-interface-gui">Graphical User Interface (GUI)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#additional-features">Additional Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#display-adaptation">Display Adaptation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ray-traced-ambient-occlusion-denoising">Ray Traced Ambient Occlusion &amp; Denoising</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SDKOverview.html">RTXGI SDK Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="DDGI.html">Dynamic Diffuse Global Illumination</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">RTXGI SDK 1.0</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="Index.html">User’s Guide</a> &raquo;</li>
        
      <li>Test Harness</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="test-harness">
<span id="harness"></span><h1>Test Harness<a class="headerlink" href="#test-harness" title="Permalink to this headline">¶</a></h1>
<p>The Test Harness sample application is designed to demonstrate the basic functionality provided by the RTXGI SDK. The Test Harness does not attempt to mimic the complexities of a full game engine, and instead substantially simplifies its scope to be a straightforward guide demonstrating how a renderer may use the RTXGI SDK. To achieve this goal, the minimal renderer design implemented in the Test Harness doesn’t include a graphics API abstraction, and DXR and Direct3D 12 API functions are called directly.</p>
<div class="section" id="main-features">
<span id="harness-features"></span><h2>Main Features<a class="headerlink" href="#main-features" title="Permalink to this headline">¶</a></h2>
<p>The RTXGI SDK Test Harness includes the following features, most of which are described in greater detail in the rest of this document:</p>
<ul class="simple">
<li><p>Startup configuration using initialization (<code class="docutils literal notranslate"><span class="pre">.ini</span></code>) text files</p></li>
<li><p>Scene loading from a custom binary (<code class="docutils literal notranslate"><span class="pre">.bin</span></code>) format</p></li>
<li><p>HLSL shader loading and compilation with DXC</p></li>
<li><p>DXR and D3D12 resource creation and management</p></li>
<li><p>DXR implementation</p></li>
<li><p>Deferred rendering</p></li>
<li><p>Primary ray tracing</p></li>
<li><p>Probe Ray Tracing (interoperates with the RTXGI SDK)</p></li>
<li><p>Indirect Lighting (interoperates with the RTXGI SDK)</p></li>
<li><p>User Interface with ImGui</p></li>
<li><p>Visualizations</p></li>
<li><p>Display Adaptation</p></li>
<li><p>Ray Traced Ambient Occlusion (RTAO) &amp; Denoising</p></li>
<li><p>Reference Path Tracer</p></li>
</ul>
<p>The Test Harness main loop (found in <code class="docutils literal notranslate"><span class="pre">rtxgi-sdk/samples/test-harness/src/harness/main.cpp</span></code>) represents one way to use the <a class="reference internal" href="DDGI.html#ddgi"><span class="std std-ref">Dynamic Diffuse Global Illumination</span></a> implementation provided in the RTXGI SDK. The remainder of this document describes the ways in which the Test Harness configures test scenes, sets up the test volume, visualizes run-time behavior, and uses additional features to demonstrate interoperability with other rendering effects.</p>
</div>
<div class="section" id="configuration">
<span id="harness-config"></span><h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>The Test Harness is configured using an <code class="docutils literal notranslate"><span class="pre">.ini</span></code> file passed as the first command line argument to the application (see <code class="docutils literal notranslate"><span class="pre">Configuration</span> <span class="pre">Properties-&gt;Debugging-&gt;Command</span> <span class="pre">Arguments</span></code> in Visual Studio to set the default <code class="docutils literal notranslate"><span class="pre">.ini</span></code> file used for debugging).</p>
<p>These <code class="docutils literal notranslate"><span class="pre">.ini</span></code> files contain the following options:</p>
<div class="section" id="application-configuration">
<span id="harness-appconfig"></span><h3>Application Configuration<a class="headerlink" href="#application-configuration" title="Permalink to this headline">¶</a></h3>
<p>Application level configuration options are specified immediately after the <code class="docutils literal notranslate"><span class="pre">#[application]</span></code> tag in the <code class="docutils literal notranslate"><span class="pre">.ini</span></code> file. The following options are available:</p>
<table class="colwidths-given docutils align-default" id="id1">
<caption><span class="caption-text">Application Configuration Options</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 11%" />
<col style="width: 7%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">width</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></td>
<td><p>The horizontal resolution of the output image, in pixels. Default is 1280.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">height</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></td>
<td><p>The vertical resolution of the output image, in pixels. Default is 720.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">vsync</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>Specifies whether vertical sync is engaged. Set to 1 for enabled, 0 for disabled. Default is enabled.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mode</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></td>
<td><p>The rendering mode. Set to 0 for the reference path tracer, 1 for RTXGI DDGI. Default is RTXGI DDGI.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ui</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>Specifies whether to render the GUI. Set to 1 for enabled, 0 for disabled. Default is disabled.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">root</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>The path to the application’s working directory (absolute, or relative to the executable).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rtxgi-sdk</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>The path to the rtxgi-sdk directory (absolute, or relative to the executable).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">scene</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>The path to the scene <code class="docutils literal notranslate"><span class="pre">.bin</span></code> file to use. This path is concatenated with the root path. See <a class="reference internal" href="#scene-and-asset-loading">Scene and Asset Loading</a>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="light-configuration">
<span id="harness-lightconfig"></span><h3>Light Configuration<a class="headerlink" href="#light-configuration" title="Permalink to this headline">¶</a></h3>
<p>The Test Harness computes lighting for three light types (point, spot, and directional) during the Primary Ray Tracing pass, with a maximum of one light of each type. Light configuration options for each light type are specified immediately after the <code class="docutils literal notranslate"><span class="pre">#[lights]</span></code> tag in the <code class="docutils literal notranslate"><span class="pre">.ini</span></code> file. The following options are available:</p>
<table class="colwidths-given docutils align-default" id="id2">
<caption><span class="caption-text">Point Light Configuration Options</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 16%" />
<col style="width: 11%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pointLightPosition</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float3</span></code></p></td>
<td><p>The world-space position (x, y, z) of the point light.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pointLightColor</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float3</span></code></p></td>
<td><p>The RGB color of the point light.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pointLightPower</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>The power of the point light.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pointLightMaxDistance</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>The radius, in world-space units, of the sphere within which the point light impacts surfaces.</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default" id="id3">
<caption><span class="caption-text">Spot Light Configuration Options</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 16%" />
<col style="width: 11%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">spotLightPosition</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float3</span></code></p></td>
<td><p>The world-space position (x, y, z) of the spot light.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">spotLightDirection</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float3</span></code></p></td>
<td><p>The direction of the spot light. Normalized before use.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">spotLightColor</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float3</span></code></p></td>
<td><p>The RGB color of the spot light.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">spotLightPower</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>The power of the spot light.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">spotLightMaxDistance</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>The extent, in world-space units, within which the spot light impacts surfaces.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">spotLightUmbraAngle</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>The umbra angle, in degrees, of the spot light.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">spotLightPenumbraAngle</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>The penumbra angle, in degrees, of the spot light.</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default" id="id4">
<caption><span class="caption-text">Directional Light Configuration Options</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 16%" />
<col style="width: 11%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">directionalLight</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float3</span></code></p></td>
<td><p>The direction of the directional light. Normalized before use.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">directionalLightColor</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float3</span></code></p></td>
<td><p>The RGB color of the directional light.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">directionalLightPower</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>The power of the directional light.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="camera-configuration">
<span id="harness-cameraconfig"></span><h3>Camera Configuration<a class="headerlink" href="#camera-configuration" title="Permalink to this headline">¶</a></h3>
<p>Camera configuration options are specified immediately after the <code class="docutils literal notranslate"><span class="pre">#[camera]</span></code> tag in the <code class="docutils literal notranslate"><span class="pre">.ini</span></code> file. The following options are available:</p>
<table class="colwidths-given docutils align-default" id="id5">
<caption><span class="caption-text">Camera Configuration Options</span><a class="headerlink" href="#id5" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 16%" />
<col style="width: 11%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cameraPosition</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float3</span></code></p></td>
<td><p>The world-space (x, y, z) position of the camera.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cameraYaw</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>The camera yaw, in degrees.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cameraPitch</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>The camera pitch, in degrees.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cameraFov</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>The vertical camera field of view, in degrees.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="ray-tracing-configuration">
<span id="harness-rtconfig"></span><h3>Ray Tracing Configuration<a class="headerlink" href="#ray-tracing-configuration" title="Permalink to this headline">¶</a></h3>
<p>Ray Tracing configuration options are specified immediately after the <code class="docutils literal notranslate"><span class="pre">#[raytracing]</span></code> tag in the <code class="docutils literal notranslate"><span class="pre">.ini</span></code> file. The following options are available:</p>
<table class="colwidths-given docutils align-default" id="id6">
<caption><span class="caption-text">Ray Tracing Configuration Options</span><a class="headerlink" href="#id6" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 12%" />
<col style="width: 8%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rtViewBias</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float3</span></code></p></td>
<td><p>A small world-space offset along the <em>camera view ray</em> applied to the ray origin before ray tracing (shadow rays and path tracing).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">rtViewBias</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>A small world-space offset along the <em>surface normal</em> applied to the ray origin before ray tracing (shadow rays and path tracing).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rtNumBounces</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>The number of bounces used in the path tracer.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="volume-configuration">
<span id="harness-volumeconfig"></span><h3>Volume Configuration<a class="headerlink" href="#volume-configuration" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> configuration options are specified immediately after the <code class="docutils literal notranslate"><span class="pre">#[volume]</span></code> tag in the <code class="docutils literal notranslate"><span class="pre">.ini</span></code> file. The following options are available:</p>
<table class="colwidths-given docutils align-default" id="id7">
<caption><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> Configuration Options</span><a class="headerlink" href="#id7" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 16%" />
<col style="width: 11%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">origin</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float3</span></code></p></td>
<td><p>The world-space origin of the <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">probeGridCounts</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">int3</span></code></p></td>
<td><p>The number of probes along each axis (x, y, z).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">probeGridSpacing</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float3</span></code></p></td>
<td><p>The distance between probes on each axis (x, y, z), in world-space units.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hysteresis</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Controls the influence of newly traced rays when updating probes. See <a class="reference internal" href="DDGI.html#ddgi-describevolume"><span class="std std-ref">Describing a Volume</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">probeChangeThreshold</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>A threshold ratio used during radiance blending. See <a class="reference internal" href="DDGI.html#ddgi-describevolume"><span class="std std-ref">Describing a Volume</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">probeBrightnessThreshold</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>A threshold value used during radiance blending. See <a class="reference internal" href="DDGI.html#ddgi-describevolume"><span class="std std-ref">Describing a Volume</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">viewBias</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> view bias. See <a class="reference internal" href="DDGI.html#ddgi-describevolume"><span class="std std-ref">Describing a Volume</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">normalBias</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> normal bias. See <a class="reference internal" href="DDGI.html#ddgi-describevolume"><span class="std std-ref">Describing a Volume</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">numRaysPerProbe</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></td>
<td><p>The number of rays to cast per probe. See <a class="reference internal" href="DDGI.html#ddgi-describevolume"><span class="std std-ref">Describing a Volume</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">numIrradianceTexels</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></td>
<td><p>The number of irradiance texels per probe. See <a class="reference internal" href="DDGI.html#ddgi-describevolume"><span class="std std-ref">Describing a Volume</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">numDistanceTexels</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></td>
<td><p>The number of distanctexels per probe. See <a class="reference internal" href="DDGI.html#ddgi-describevolume"><span class="std std-ref">Describing a Volume</span></a>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="input-configuration">
<span id="harness-inputconfig"></span><h3>Input Configuration<a class="headerlink" href="#input-configuration" title="Permalink to this headline">¶</a></h3>
<p>Input configuration options are specified immediately after the <code class="docutils literal notranslate"><span class="pre">#[input]</span></code> tag in the <code class="docutils literal notranslate"><span class="pre">.ini</span></code> file. The following options are available:</p>
<table class="colwidths-given docutils align-default" id="id8">
<caption><span class="caption-text">Input Configuration Options</span><a class="headerlink" href="#id8" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 16%" />
<col style="width: 11%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">inputInvertPan</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>Configures whether the camera pan controls are inverted or not. Set to 1 to invert, 0 to not. Default is inverted.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">inputMovementSpeed</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>The speed the camera translates through the scene. Since movement is updated each frame, it is tied to the framerate.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">inputRotationSpeed</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>The (angular) speed the camera rotates. Since rotation is updated each frame, it is tied to the framerate.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="post-process-configuration">
<span id="harness-postconfig"></span><h3>Post Process Configuration<a class="headerlink" href="#post-process-configuration" title="Permalink to this headline">¶</a></h3>
<p>Post process configuration options are specified immediately after the <code class="docutils literal notranslate"><span class="pre">#[postprocess]</span></code> tag in the <code class="docutils literal notranslate"><span class="pre">.ini</span></code> file. The following options are available:</p>
<table class="colwidths-given docutils align-default" id="id9">
<caption><span class="caption-text">Post Process Configuration Options</span><a class="headerlink" href="#id9" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 13%" />
<col style="width: 9%" />
<col style="width: 78%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AORadius</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>The maximum distance of an ambient occlusion ray can travel. See <a class="reference internal" href="#ray-traced-ambient-occlusion-denoising">Ray Traced Ambient Occlusion &amp; Denoising</a>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">AOFilterDepthSigma</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>The ambient occlusion denoiser’s depth sigma. See <a class="reference internal" href="#ray-traced-ambient-occlusion-denoising">Ray Traced Ambient Occlusion &amp; Denoising</a>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="visualization-configuration">
<span id="harness-vizconfig"></span><h3>Visualization Configuration<a class="headerlink" href="#visualization-configuration" title="Permalink to this headline">¶</a></h3>
<p>Visualization configuration options are specified immediately after the <code class="docutils literal notranslate"><span class="pre">#[visualization]</span></code> tag in the <code class="docutils literal notranslate"><span class="pre">.ini</span></code> file. These options control the visualization of the data of a <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> as described in <a class="reference internal" href="#texture-visualization">Texture Visualization</a> and <a class="reference internal" href="#probe-visualization">Probe Visualization</a>. The following options are available:</p>
<table class="colwidths-given docutils align-default" id="id10">
<caption><span class="caption-text">Visualization Configuration Options</span><a class="headerlink" href="#id10" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 16%" />
<col style="width: 11%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">vizShowDDGIBuffers</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>Specifies whether <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> textures are visualized. Set to 1 to enable, 0 to disable. Default is disabled.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">vizShowDDGIProbes</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>Specifies whether <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> probes are visualized. Set to 1 to enable, 0 to disable. Default is disabled.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">vizProbeRadius</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>The radius of the visualized probe spheres, in world-space units. Default is 1.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">vizBufferIrradianceScale</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>A scaling factor for the irradiance texture, in pixels. Default is 2.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">vizBufferDistanceScale</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>A scale factor for the distance texture, in pixels. Default is 1.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">vizBufferDistanceDivisor</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>A world-space value that the sampled distance is divided by before visualization. Used to handle scenes with varying scales. Default is 1.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">vizBufferRadianceScale</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>A scaling factor for the radiance texture, in pixels. Default is 1.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">vizBufferOffsetScale</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>A scaling factor for the probe offset texture, in pixels. Default is 10.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">vizBufferStateScale</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>A scaling factor for the probe state texture, in pixels. Default is 10.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="scene-and-asset-loading">
<span id="harness-sceneloading"></span><h2>Scene and Asset Loading<a class="headerlink" href="#scene-and-asset-loading" title="Permalink to this headline">¶</a></h2>
<p>Two test scenes are distributed with the SDK, and can be loaded in the Test Harness by setting the <code class="docutils literal notranslate"><span class="pre">scene</span></code> parameter in the <code class="docutils literal notranslate"><span class="pre">.ini</span></code> file to the path of the desired scene binary file. Scene files are located in <code class="docutils literal notranslate"><span class="pre">samples/test-harness/data/scenes</span></code> and config files are located in <code class="docutils literal notranslate"><span class="pre">samples/test-harness/config</span></code>.</p>
<p>The following tables show images of each test scene from the default camera position with different global illumination solutions enabled:</p>
<table class="colwidths-given docutils align-default" id="id11">
<caption><span class="caption-text">Two Rooms (<code class="docutils literal notranslate"><span class="pre">two-rooms-plane.bin</span></code>, <code class="docutils literal notranslate"><span class="pre">two-rooms.ini</span></code>)</span><a class="headerlink" href="#id11" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Direct Illumination Only</p></th>
<th class="head"><p>RTXGI DDGIVolume + RTAO</p></th>
<th class="head"><p>Reference Path Tracer</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><img alt="two_rooms_off" src="../_images/two-rooms_off.jpg" /></p></td>
<td><p><img alt="two_rooms_image" src="../_images/two-rooms.jpg" /></p></td>
<td><p><img alt="two_rooms_pt" src="../_images/two-rooms_pt.jpg" /></p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default" id="id12">
<caption><span class="caption-text">Cornell Box (<code class="docutils literal notranslate"><span class="pre">cornell.bin</span></code>, <code class="docutils literal notranslate"><span class="pre">cornell.ini</span></code>)</span><a class="headerlink" href="#id12" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Direct Illumination Only</p></th>
<th class="head"><p>RTXGI DDGIVolume + RTAO</p></th>
<th class="head"><p>Reference Path Tracer</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><img alt="cornell_off" src="../_images/cornell_off.jpg" /></p></td>
<td><p><img alt="cornell_image" src="../_images/cornell.jpg" /></p></td>
<td><p><img alt="cornell_pt" src="../_images/cornell_pt.jpg" /></p></td>
</tr>
</tbody>
</table>
<p><strong>Scene Binary File Format</strong></p>
<p>Since loading additional scenes into the Test Harness will likely prove useful during experimentation and debugging, the custom binary file format is described below. The deserialization of this format is implemented in <code class="docutils literal notranslate"><span class="pre">samples/test-harness/src/harness/Deserializer.cpp</span></code>.</p>
<div class="highlight-hlsl notranslate"><div class="highlight"><pre><span></span><span class="c1">// Format</span>
<span class="p">[</span> <span class="n">size</span> <span class="p">]</span> <span class="o">-</span> <span class="n">description</span>

<span class="c1">// HEADER</span>
<span class="p">[</span> <span class="mi">4</span> <span class="n">bytes</span> <span class="p">]</span> <span class="o">-</span> <span class="n">number</span> <span class="n">of</span> <span class="n">materials</span>
<span class="p">[</span> <span class="mi">4</span> <span class="n">bytes</span> <span class="p">]</span> <span class="o">-</span> <span class="n">number</span> <span class="n">of</span> <span class="n">meshes</span>

<span class="c1">// MATERIALS</span>

<span class="c1">//---[material 0]---</span>
<span class="p">[</span> <span class="mi">4</span> <span class="n">bytes</span>  <span class="p">]</span> <span class="o">-</span> <span class="n">number</span> <span class="n">of</span> <span class="n">characters</span> <span class="k">in</span> <span class="n">material</span> <span class="n">name</span> <span class="p">(</span><span class="kt">uint</span><span class="p">)</span>
<span class="p">[</span> <span class="n">variable</span> <span class="p">]</span> <span class="o">-</span> <span class="n">material</span> <span class="n">name</span>
<span class="p">[</span> <span class="mi">12</span> <span class="n">bytes</span> <span class="p">]</span> <span class="o">-</span> <span class="n">diffuse</span> <span class="n">color</span> <span class="p">(</span><span class="kt">float3</span><span class="p">)</span>
<span class="c1">//-----------------</span>
        <span class="p">.</span>
        <span class="p">.</span>
        <span class="p">.</span>
<span class="c1">//---[material n]---</span>

<span class="c1">// GEOMETRY</span>

<span class="c1">//---[mesh 0]-----</span>
<span class="p">[</span> <span class="mi">4</span> <span class="n">bytes</span>  <span class="p">]</span> <span class="o">-</span> <span class="n">number</span> <span class="n">of</span> <span class="n">vertices</span>
<span class="p">[</span> <span class="mi">4</span> <span class="n">bytes</span>  <span class="p">]</span> <span class="o">-</span> <span class="n">number</span> <span class="n">of</span> <span class="n">indices</span>
<span class="p">[</span> <span class="mi">4</span> <span class="n">bytes</span>  <span class="p">]</span> <span class="o">-</span> <span class="n">material</span> <span class="n">index</span>
<span class="p">[</span> <span class="mi">4</span> <span class="n">bytes</span>  <span class="p">]</span> <span class="o">-</span> <span class="n">number</span> <span class="n">of</span> <span class="n">characters</span> <span class="k">in</span> <span class="n">the</span> <span class="n">mesh</span> <span class="n">name</span>
<span class="p">[</span> <span class="n">variable</span> <span class="p">]</span> <span class="o">-</span> <span class="n">mesh</span> <span class="n">name</span>

<span class="c1">// Vertex Stream (Position + Normal)</span>
<span class="p">[</span> <span class="mi">4</span> <span class="n">bytes</span>  <span class="p">]</span> <span class="o">-</span> <span class="n">vertex</span> <span class="n">stride</span>
<span class="p">[</span> <span class="mi">4</span> <span class="n">bytes</span>  <span class="p">]</span> <span class="o">-</span> <span class="n">index</span> <span class="n">stride</span>
<span class="p">[</span> <span class="n">variable</span> <span class="p">]</span> <span class="o">-</span> <span class="n">vertex</span> <span class="n">data</span>
<span class="p">[</span> <span class="n">variable</span> <span class="p">]</span> <span class="o">-</span> <span class="n">index</span> <span class="n">data</span>
<span class="c1">//----------------</span>
        <span class="p">.</span>
        <span class="p">.</span>
        <span class="p">.</span>
<span class="c1">//---[mesh n]-----</span>
</pre></div>
</div>
</div>
<div class="section" id="shaders">
<span id="harness-shaders"></span><h2>Shaders<a class="headerlink" href="#shaders" title="Permalink to this headline">¶</a></h2>
<p>The Test Harness includes several HLSL shaders, which are divided into two groups:</p>
<blockquote>
<div><ul class="simple">
<li><p>Include shader files that contain declarations and/or functionality used by multiple top level shaders</p></li>
<li><p>Top level shaders that define the entry points of GPU workloads that are dispatched from the host</p></li>
</ul>
</div></blockquote>
<p>Most host side functionality related to shaders exists in the <code class="docutils literal notranslate"><span class="pre">Shaders</span></code> namespace, is declared in <code class="docutils literal notranslate"><span class="pre">samples/test-harness/include/Shaders.h</span></code>, and defined in <code class="docutils literal notranslate"><span class="pre">samples/test-harness/src/Shaders.cpp</span></code>. Shaders are compiled using the <a class="reference external" href="https://github.com/microsoft/DirectXShaderCompiler">DirectX Shader Compiler (DXC)</a> targeting Shader Model 6. The <code class="docutils literal notranslate"><span class="pre">Harness::CompileShaders(...)</span></code> function in <code class="docutils literal notranslate"><span class="pre">samples/test-harness/src/Harness.cpp</span></code> loads and compiles the DDGI compute shaders.</p>
<p>The following table provides a brief description of each shared shader file found in <code class="docutils literal notranslate"><span class="pre">samples/test-harness/shaders/include</span></code>:</p>
<table class="colwidths-given docutils align-default" id="id13">
<caption><span class="caption-text">Include Shaders</span><a class="headerlink" href="#id13" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>File Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Common.hlsl</span></code></p></td>
<td><p>Common utility methods and values.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ComputeRS.hlsl</span></code></p></td>
<td><p>The root signature for compute passes.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">LightingCommon.hlsl</span></code></p></td>
<td><p>Common methods for lighting evaluation. This file can be freely included, since all resources are passed through parameters.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Random.hlsl</span></code></p></td>
<td><p>Common utilities for random number generation, hashing, and noise generation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RasterRS.hlsl</span></code></p></td>
<td><p>The root signature for raster passes.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RTCommon.hlsl</span></code></p></td>
<td><p>Common ray tracing methods and values (e.g. the payload).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RTGlobalRS.hlsl</span></code></p></td>
<td><p>The global root signature for ray tracing passes.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RTLocalRS.hlsl</span></code></p></td>
<td><p>The local root signature for ray tracing passes. Includes helper functions to fetch vertex data for Closest Hit and Any Hit Shaders.</p></td>
</tr>
</tbody>
</table>
<p>The next table gives a brief description of each top level shader found in <code class="docutils literal notranslate"><span class="pre">samples/test-harness/shaders</span></code> that defines entry points for GPU workloads :</p>
<table class="colwidths-given docutils align-default" id="id14">
<caption><span class="caption-text">Top Level Shaders</span><a class="headerlink" href="#id14" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 15%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>File Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AOFilterCS.hlsl</span></code></p></td>
<td><p>A Compute Shader that filters raw ambient occlusion results.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">AOTraceRGS.hlsl</span></code></p></td>
<td><p>A Ray Generation Shader that traces rays to compute ambient occlusion.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ClosestHit.hlsl</span></code></p></td>
<td><p>Closest Hit Shaders that return material properties in the payload.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Indirect.hlsl</span></code></p></td>
<td><p>Fullscreen Vertex and Pixel Shaders that compute indirect lighting and perform compositing (Direct+GI+AO).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Miss.hlsl</span></code></p></td>
<td><p>A Miss Shader.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PathTraceRGS.hlsl</span></code></p></td>
<td><p>A Ray Generation Shader that implements path tracing (iteratively).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PrimaryTraceRGS.hlsl</span></code></p></td>
<td><p>A Ray Generation Shader that traces primary visibility (camera) rays.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ProbeTraceRGS.hlsl</span></code></p></td>
<td><p>A Ray Generation Shader that traces rays from <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> probes.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VisDDGIBuffers.hlsl</span></code></p></td>
<td><p>Fullscreen Vertex and Pixel Shaders that visualize <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> textures.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VisDDGIProbes.hlsl</span></code></p></td>
<td><p>A Ray Generation Shader that visualizes <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> probes.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VisUpdateTLASCS.hlsl</span></code></p></td>
<td><p>A Compute Shader that updates the instances in the Top Level Acceleration Structure (TLAS).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="debugging-and-visualization">
<span id="harness-debugandviz"></span><h2>Debugging and Visualization<a class="headerlink" href="#debugging-and-visualization" title="Permalink to this headline">¶</a></h2>
<p>To aid in debugging <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> configuration, updates, and usage the Test Harness includes the following visualization and debugging features:</p>
<ul class="simple">
<li><p>Probe Visualization</p></li>
<li><p>Texture Visualization</p></li>
<li><p>Camera and Volume movement</p></li>
</ul>
<div class="section" id="probe-visualization">
<span id="harness-probeviz"></span><h3>Probe Visualization<a class="headerlink" href="#probe-visualization" title="Permalink to this headline">¶</a></h3>
<p>The Test Harness includes a feature to render <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> probes in the scene. <code class="docutils literal notranslate"><span class="pre">Visualization::RenderProbes(...)</span></code> implements this functionality and expects the DXR TLAS is updated with <code class="docutils literal notranslate"><span class="pre">DXR::UpdateVisTLAS(...)</span></code>. This visualization can be enabled or disabled through the GUI or by pressing <code class="docutils literal notranslate"><span class="pre">p</span></code> on the keyboard.</p>
<p>Visualization probes are rendered with a sphere of user defined radius (see <code class="docutils literal notranslate"><span class="pre">vizProbeRadius</span></code> in <a class="reference internal" href="#visualization-configuration">Visualization Configuration</a>) centered around the world-space location of each probe. The surface of the sphere is colored with the irradiance values stored in the probe for each direction. This is helpful for understanding the contribution of each probe to the irradiance of nearby geometry, discovering bugs in probe update logic, and finding sources of flicker or other artifacts in probe irradiance over time.</p>
<div class="figure align-center" id="id15" style="width: 70%">
<img alt="Probe Visualization" src="../_images/probe_visualization.jpg" />
<p class="caption"><span class="caption-text">Probe visualization enabled in the Test Harness for the Two Rooms scene.</span><a class="headerlink" href="#id15" title="Permalink to this image">¶</a></p>
</div>
<p><br/>
When probe relocation is enabled (see <a class="reference internal" href="DDGI.html#probe-offsets"><span class="std std-ref">Probe Relocation and Position Optimization</span></a>), the visualized probe locations include the appropriate offsets. See the below screenshots for an example. On the left probe relocation is disabled, and on the right probe relocation is enabled. Notice how probes that were originally intersecting or inside of geometry and moved out of the geometry when probe relocation is enabled.</p>
<blockquote>
<div><table class="colwidths-given docutils align-center" id="id16">
<caption><span class="caption-text">Probe Relocation in the Cornell Box</span><a class="headerlink" href="#id16" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Probe Relocation Off</p></th>
<th class="head"><p>Probe Relocation On</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><img alt="cornell_probes" src="../_images/cornell_probes.jpg" /></p></td>
<td><p><img alt="cornell_probes_relocated" src="../_images/cornell_probes_relocated.jpg" /></p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><br/>
When probe state classification is enabled, each probe’s state is also visualized by  a colored outline. A green outline indicates an active probe, and a red outline indicates an inactive probe. See <a class="reference internal" href="DDGI.html#probe-states"><span class="std std-ref">Probe State Classification</span></a> for more information. The below screenshot is an example:</p>
<blockquote>
<div><div class="figure align-center">
<a class="reference internal image-reference" href="../_images/cornell_states.jpg"><img alt="Probe State Visualization" src="../_images/cornell_states.jpg" style="width: 50%;" /></a>
</div>
</div></blockquote>
</div>
<div class="section" id="texture-visualization">
<span id="harness-texture-viz"></span><h3>Texture Visualization<a class="headerlink" href="#texture-visualization" title="Permalink to this headline">¶</a></h3>
<p>The Test Harness includes a feature to visualize <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> probe data textures. <code class="docutils literal notranslate"><span class="pre">Visualization::RenderBuffers(...)</span></code> provides this functionality. The visualization can be enabled or disabled through the GUI or by pressing <code class="docutils literal notranslate"><span class="pre">b</span></code> on the keyboard.</p>
<p>The size that the textures appear on screen can be configured through the corresponding values in the <code class="docutils literal notranslate"><span class="pre">.ini</span></code> file (see <a class="reference internal" href="#visualization-configuration">Visualization Configuration</a> for details). The top-most texture visualized is the irradiance texture, which shows the accumulated irradiance values for each probe. Next is the distance texture, which shows hit distance in green and distance² in red. The third texture shows the radiance computed for the probe rays.</p>
<div class="figure align-center" id="id17" style="width: 100%">
<img alt="Texture Visualization" src="../_images/buffer_visualization.jpg" />
<p class="caption"><span class="caption-text">Probe texture visualization enabled in the Test Harness, with zoomed inlays to highlight the visualization.</span><a class="headerlink" href="#id17" title="Permalink to this image">¶</a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When probe relocation (see <a class="reference internal" href="DDGI.html#probe-offsets"><span class="std std-ref">Probe Relocation and Position Optimization</span></a>) or probe state classification (see <a class="reference internal" href="DDGI.html#probe-states"><span class="std std-ref">Probe State Classification</span></a>) are enabled, additional textures are visualized. These appear after the probe radiance texture, and display world-space probe offsets (top) and probe states (bottom). Although these textures may not be obviously helpful at a glance, they reveal useful information when inspected in debugging tools such as Nsight Graphics or PIX.</p>
<div class="figure align-center" style="width: 60%">
<img alt="../_images/buffer_visualization-ea.png" src="../_images/buffer_visualization-ea.png" />
</div>
</div>
</div>
<div class="section" id="camera-and-volume-movement">
<span id="harness-movement"></span><h3>Camera and Volume Movement<a class="headerlink" href="#camera-and-volume-movement" title="Permalink to this headline">¶</a></h3>
<p>As described in <a class="reference internal" href="#mouse-and-keyboard">Mouse and Keyboard</a>, the camera and <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> can be translated with keyboard commands. Both camera and volume translation are provided to aid in visualizing and debugging the scene and volume. The mouse can be used to rotate the camera by holding the left mouse button, and pan the camera by holding the right mouse button.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>While keyboard controls allow the volume to move, remember that a <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> is intended to store irradiance in a volume of space where the primary scene geometry is stationary relative to the <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code>. Volume movement is intended as a debugging feature in this release. Artifacts are expected when the volume moves and its values are used on subsequent frames prior to convergence.</p>
</div>
</div>
</div>
<div class="section" id="input-controls">
<span id="harness-input"></span><h2>Input Controls<a class="headerlink" href="#input-controls" title="Permalink to this headline">¶</a></h2>
<div class="section" id="mouse-and-keyboard">
<span id="harness-mouseandkeys"></span><h3>Mouse and Keyboard<a class="headerlink" href="#mouse-and-keyboard" title="Permalink to this headline">¶</a></h3>
<p>The Test Harness includes the following mouse and keyboard controls:</p>
<table class="colwidths-given docutils align-default" id="id18">
<caption><span class="caption-text">Mouse Controls</span><a class="headerlink" href="#id18" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Mouse Action</p></th>
<th class="head"><p>Result</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Left</span> <span class="pre">Button</span> <span class="pre">Drag</span></code></p></td>
<td><p>Rotate the camera. Left/Right for Yaw, Forward/Back for Pitch.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Right</span> <span class="pre">Button</span> <span class="pre">Drag</span></code></p></td>
<td><p>Pan the camera.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Middle</span> <span class="pre">Wheel</span> <span class="pre">Scroll</span></code></p></td>
<td><p>Zoom the camera. Forward/Back for In/Out.</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default" id="id19">
<caption><span class="caption-text">Keyboard Controls</span><a class="headerlink" href="#id19" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Result</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">w</span></code>, <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">s</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">e</span></code>, <code class="docutils literal notranslate"><span class="pre">q</span></code></p></td>
<td><p>Translate the camera forward, left, back, right, up and down (respectively).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">i</span></code></p></td>
<td><p>Invert the mouse pan direction (right click).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">UP</span></code>, <code class="docutils literal notranslate"><span class="pre">LEFT</span></code>, <code class="docutils literal notranslate"><span class="pre">DOWN</span></code>, <code class="docutils literal notranslate"><span class="pre">RIGHT</span></code>, <code class="docutils literal notranslate"><span class="pre">PAGE_UP</span></code>, <code class="docutils literal notranslate"><span class="pre">PAGE_DOWN</span></code></p></td>
<td><p>Translate the <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> forward, left, back, right, up and down (respectively).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">SHIFT</span></code></p></td>
<td><p>Apply a 2x multiplier on camera and volume motion velocity.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CONTROL</span></code></p></td>
<td><p>Apply a 10% multiplier on camera and volume motion velocity.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ALT</span></code></p></td>
<td><p>Apply a 1% multiplier on camera and volume motion velocity.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">p</span></code></p></td>
<td><p>Toggle <a class="reference internal" href="#probe-visualization">Probe Visualization</a> on and off.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">b</span></code></p></td>
<td><p>Toggle <a class="reference internal" href="#texture-visualization">Texture Visualization</a> on and off.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r</span></code></p></td>
<td><p>Reload the scene from <code class="docutils literal notranslate"><span class="pre">.ini</span></code> and reset the <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">t</span></code></p></td>
<td><p>Toggle DDGI irradiance on and off.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">u</span></code></p></td>
<td><p>Toggle GUI display on and off.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">m</span></code></p></td>
<td><p>Toggle between DDGI and Path Tracing rendering modes.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">g</span></code></p></td>
<td><p>Restart the probe optimizer (see early access feature <a class="reference internal" href="DDGI.html#probe-offsets"><span class="std std-ref">Probe Relocation and Position Optimization</span></a>).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">k</span></code></p></td>
<td><p>Reset all probes to active state (see early access feature <a class="reference internal" href="DDGI.html#probe-states"><span class="std std-ref">Probe State Classification</span></a>).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">l</span></code></p></td>
<td><p>Toggle between allowing probes to become inactive or not (see early access feature <a class="reference internal" href="DDGI.html#probe-states"><span class="std std-ref">Probe State Classification</span></a>).</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">CONTROL</span></code>, <code class="docutils literal notranslate"><span class="pre">SHIFT</span></code> and <code class="docutils literal notranslate"><span class="pre">ALT</span></code> commands <em>multiply</em>. For example, allowing a 20% motion speed by using both <code class="docutils literal notranslate"><span class="pre">SHIFT</span></code> and <code class="docutils literal notranslate"><span class="pre">CONTROL</span></code> at the same time.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code class="docutils literal notranslate"><span class="pre">g</span></code>, <code class="docutils literal notranslate"><span class="pre">k</span></code> and <code class="docutils literal notranslate"><span class="pre">l</span></code> keyboard controls are only available when the associated early access feature is enabled.</p>
</div>
</div>
<div class="section" id="graphical-user-interface-gui">
<span id="harness-gui"></span><h3>Graphical User Interface (GUI)<a class="headerlink" href="#graphical-user-interface-gui" title="Permalink to this headline">¶</a></h3>
<p>The Test Harness provides a set of GUI controls. The GUI can be toggled on and off with the <code class="docutils literal notranslate"><span class="pre">u</span></code> key. These controls allow the user to see useful information, and adjust various run time settings. Most controls mirror the <a class="reference internal" href="#mouse-and-keyboard">Mouse and Keyboard</a> controls or display information with clear labels. The <code class="docutils literal notranslate"><span class="pre">(?)</span></code> in the GUI provide tooltips when the mouse cursor hovers over them.</p>
<p>The following figure is an example of some of the available GUI controls:</p>
<div class="figure align-default" id="id20">
<img alt="GUI Controls" src="../_images/gui.jpg" />
<p class="caption"><span class="caption-text">Graphical user interface controls.</span><a class="headerlink" href="#id20" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="additional-features">
<span id="harness-additional"></span><h2>Additional Features<a class="headerlink" href="#additional-features" title="Permalink to this headline">¶</a></h2>
<p>RTXGI may be used in combination with many other common rendering techniques. To demonstrate this interoperability, ray traced ambient occlusion and display adaptation are implemented in the Test Harness.</p>
<div class="section" id="display-adaptation">
<span id="harness-displayadaptation"></span><h3>Display Adaptation<a class="headerlink" href="#display-adaptation" title="Permalink to this headline">¶</a></h3>
<p>Lighting calculations are computed as high dynamic range (HDR) values in linear space. The following steps are done to convert the linear HDR values to those suitable for an sRGB standard dynamic range (SDR) back buffer format.</p>
<ol class="arabic simple">
<li><p><strong>Exposure:</strong> linear HDR values are multiplied by the GUI “Exposure” control, to brighten or darken the final image.</p></li>
<li><p><strong>Tone Mapping:</strong> a luminance only fit of the ACES tone mapper is used to convert the linear HDR content to linear SDR content levels. See <a class="reference external" href="https://knarkowicz.wordpress.com/2016/01/06/aces-filmic-tone-mapping-curve/">Krzysztof Narkowicz 2016</a> for more information.</p></li>
<li><p><strong>Dithering:</strong> dithering using a screen space blue noise texture is applied to the linear SDR content to remove banding artifacts from quantization. The golden ratio animates the dithering pattern to be blue noise over space and low discrepancy over time, which increases the quality of the dithered result.</p></li>
<li><p><strong>Linear to sRGB conversion:</strong> the sRGB transfer function is applied to the dithered linear SDR values to produce the final image.</p></li>
</ol>
</div>
<div class="section" id="ray-traced-ambient-occlusion-denoising">
<span id="harness-rtao"></span><h3>Ray Traced Ambient Occlusion &amp; Denoising<a class="headerlink" href="#ray-traced-ambient-occlusion-denoising" title="Permalink to this headline">¶</a></h3>
<p>A ray traced ambient occlusion (RTAO) implementation is included with the Test Harness to demonstrate one way to combine ambient occlusion with the dynamic indirect lighting provided by the <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code>. Implementation details are in the <code class="docutils literal notranslate"><span class="pre">Harness::RayTraceAO(...)</span></code> and <code class="docutils literal notranslate"><span class="pre">Harness::FilterAO(...)</span></code> functions in <code class="docutils literal notranslate"><span class="pre">rtxgi-sdk/samples/test-harness/src/harness/Harness.cpp</span></code>.</p>
<p>The RTAO implementation casts two rays per pixel in screen space at native resolution. These “raw” ambient occlusion results are then processed by a bilateral filter to reduce noise before the RTAO buffer is composited with direct and indirect lighting.</p>
<p><strong>Implementation Details</strong></p>
<ol class="arabic simple">
<li><p>Each sampling direction is computed by using a screen space blue noise texture to make an index into a low discrepancy spherical Fibonacci sequence.</p></li>
<li><p>The sampling direction is added to the pixel’s world-space surface normal, and then normalized (i.e. the cosine weighted hemispherical sample about the surface normal).</p></li>
<li><p>A ray is traced into the scene, using the computed direction and minimum and maximum ray length values that are adjustable in the GUI. The minimum ray length is the “Ray Bias” parameter, and it controls the bias used to avoid self intersection. The maximum ray length is the “Ray Length” parameter, and it controls the magnitude of the AO effect. Both parameters are in world-space units.</p></li>
<li><p>If the ray hits a surface, the distance to the intersected surface is converted to a percentage of the maximum ray length and then raised to a power controlled by “AO Power” (to control the strength of light attenuation over distance).</p></li>
</ol>
<p>After the AO samples have been taken for a pixel, the averaged result is written to an 8-bit unsigned integer texture.</p>
<p>Denoising uses a bilateral filter. The “Filter Distance Sigma” parameter controls the screen space distance weighting, and the “Filter Depth Sigma” parameter controls world-space depth weighting.</p>
<div class="figure align-center" id="id21">
<img alt="../_images/RTAO.png" src="../_images/RTAO.png" />
<p class="caption"><span class="caption-text">Left: “raw” ray traced ambient occlusion. Right: filtered ray traced ambient occlusion.</span><a class="headerlink" href="#id21" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="SDKOverview.html" class="btn btn-neutral float-right" title="RTXGI SDK Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="QuickStart.html" class="btn btn-neutral float-left" title="Quick Start" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019-2020, NVIDIA

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>